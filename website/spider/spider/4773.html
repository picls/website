<style type="text/css">.t-btn a {
    display: inline-block;
    text-align: center;
    font-size: 14px;
    margin-right: 4px;
    padding: 2px 6px;
    padding: 3px 6px 1 px\9
}

.t-btn a:hover {
    color: #FFF
}

.t-btn .input {
    font-size: 12px;
    margin-right: 5px
}

.t-btn .rss {
    padding: 0;
    vertical-align: bottom
}

.t-btn label {
    margin-right: 5px;
    margin-left: 2px;
    vertical-align: middle
}

.page {
    float: right;
    padding-top: 2px;
    *padding-top: 0
}

.t-pre, .t-pre-bottom {
    margin-top: 2px;
    width: 100%
}

.t-pre-bottom .t-btn {
    margin-left: 5px
}

.b-head div {
    cursor: pointer
}

.b-content {
    padding: 1px 0;
    border: 0 none;
    margin-top: 0
}

.a-comment {
    margin-top: 6px;
    padding: 10px;
    border: 1px solid #ddd;
    background-color: #f9f9f9
}

.a-comment-txt {
    margin-right: 88px
}

.a-comment-txt textarea {
    width: 100%;
    height: 60px;
    font-size: 12px;
    padding: 5px
}

.a-comment-btn {
    float: right
}

.a-comment-btn .button {
    height: 70px;
    width: 70px;
    cursor: pointer
}

.a-nice-comment {
    border: 1px solid #BDCAD0;
    margin-right: 160px;
    width: 750px
}

.a-nice-comment img {
    max-width: 650px
}

.a-nice-comment-item {
    padding: 10px 0 25px;
    margin: 0 20px;
    width: 710px
}

.a-nice-comment-func li:first-child {
    margin-left: 5px;
    *margin_left: 2px
}

.a-nice-comment-item + .a-nice-comment-item {
    border-top: 1px solid #ddd
}

.a-nice-comment-face {
    float: left;
    margin-top: 3px
}

.a-nice-comment-face img {
    width: 30px
}

.a-nice-comment-cell {
    margin-left: 45px;
    min-height: 30px
}

.a-nice-comment-id {
    margin-bottom: 5px
}

.a-nice-comment-id a {
    color: #4F7DC2
}

.a-nice-comment-content {
    margin-bottom: 5px
}

.a-nice-comment-floor {
    color: #888;
    margin: 0 5px 0 -5px
}

.a-nice-comment-divline {
    margin: 40px 0 20px;
    height: 0;
    width: 750px;
    font-size: 0;
    border-top: 1px solid #D2D2D2;
    border-bottom: 1px solid #FFF;
    position: relative
}

.a-nice-comment-divline h3 {
    color: #1E90FF;
    font-size: 14px;
    margin: -10px 0 0 1px;
    width: 9%;
    background-color: #FFF
}

.a-nice-comment-divline h5 {
    color: #555;
    margin: -20px 0 0 700px;
    font-size: 12px;
    width: 9%;
    background-color: #FFF;
    text-align: center
}

#spb-wrap {
    position: fixed;
    z-index: 1000;
    width: auto;
    height: auto;
    bottom: 88px;
    border: 1px outset #BBB;
    pading: 1px;
    -moz-box-shadow: 0 0 3px #bbb;
    -webkit-box-shadow: 0 0 3px #BBB;
    -box-shadow: 0 0 3px #bbb
}

#spb-container {
    position: relative;
    z-index: 1001;
    display: table;
    margin: 0;
    padding: 0 8px 0 4px;
    width: auto;
    height: auto;
    border-radius: 1px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    color: #fff;
    white-space: pre-wrap;
    word-break: break-all;
    font-weight: bold;
    font-size: 12px;
    line-height: 24px;
    *display: block;
    background-color: #30B4D5;
    border-color: #258bcf
}

#spb-container a {
    color: #fff;
    font-size: 14px
}</style>
<div class="t-pre">
    <div class="page">
        <ul class="pagination">
            <li class="page-pre">贴数:<i>11</i>&emsp;分页:</li>
            <li>
                <ol title="分页列表" class="page-main">
                    <li class="page-select"><a title="当前页">1</a></li>
                    <li class="page-normal"><a href="/article/Python/4773?p=2" title="转到第2页">2</a></li>
                    <li class="page-normal"><a href="/article/Python/4773?p=2" title="下一页">>></a></li>
                </ol>
            </li>
            <li class="page-jump"><input type="text" class="input-text"/><input type="button" class="button" title="跳转"
                                                                                value="跳"/></li>
        </ul>
    </div>
    <div class="t-btn"><a href="/article/Python/post" class="a-post button">新话题</a><a href="/article/Python/tmpl"
                                                                                      class="a-post button">模版发文</a><a
            href="javascript:void(0)" id="a_reply" class="button">快捷回复</a></div>
</div>
<div class="b-head corner"><span class="n-right"><span style="color:#eee;vertical-align:bottom" id="a_share"
                                                       _u="http://bbs.byr.cn/article/Python/4773"
                                                       _c="[问题]django中如何让所有页面都必须登陆后才能访问">分享到:</span></span><span
        class="n-left">文章主题:&ensp;[问题]django中如何让所有页面都必须登陆后才能访问</span></div>
<div class="b-content corner"><a name="a0"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/trumpet">trumpet</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4773" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-template"></samp><a href="/article/Python/tmpl?id=4773" class="a-post">模版回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4773.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4773.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=trumpet">搜索</a></li>
                        <li><samp class="ico-pos-recomend"></samp><a href="/article/Python/ajax_focus/4773.json"
                                                                     class="a-func-focus">推荐</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=trumpet">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">楼主</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/img/face_default_m.jpg"/></div>
                    <div class="a-u-uid"> trumpet</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>176</dd>
                        <dt>积分</dt>
                        <dd>1148</dd>
                        <dt>星座</dt>
                        <dd>未知</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: trumpet ( trumpet), 信区: Python <br/> 标&nbsp;&nbsp;题:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 00:03:50 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        我想到的一种方法是对views.py中的每个请求处理函数加上@login_required，但每个函数前都加着个装饰器感觉比较冗余，哪位大神有更好的方法啊？跪求<img
                                src="/img/ubb/ema/9.gif" alt="ema9" style="display:inline;border-style:none"/> <br/> --
                        <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font class="f005">※ 来源:・北邮人论坛 <a
                                target="_blank" href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM:
                            114.255.40.*]</font><font class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/trumpet">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4773?id=trumpet"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=trumpet"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a1"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/hansnow">hansnow</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4774" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4774.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4774.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=hansnow">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=hansnow">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">沙发</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/uploadFace/H/hansnow.7560.jpg" width="119px"
                                              height="120px"/></div>
                    <div class="a-u-uid">小寒</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>158</dd>
                        <dt>积分</dt>
                        <dd>2979</dd>
                        <dt>星座</dt>
                        <dd>魔羯座</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: hansnow (小寒), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 07:29:46 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        这种事儿不是应该用session或者token嘛？ <br/> -- <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font
                                class="f003">※ 来源:・北邮人论坛 <a target="_blank"
                                                            href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM:
                            10.205.7.*]</font><font class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/hansnow">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4774?id=hansnow"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=hansnow"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a2"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/toobee">toobee</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4775" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4775.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4775.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=toobee">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=toobee">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">板凳</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/img/face_default_m.jpg"/></div>
                    <div class="a-u-uid">2BBBBBBbbbbboooo</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>216</dd>
                        <dt>积分</dt>
                        <dd>929</dd>
                        <dt>星座</dt>
                        <dd>天蝎座</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: toobee (2BBBBBBbbbbboooo), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 11:03:57 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        session啊~ <br/> -- <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font class="f003">※
                            来源:・北邮人论坛 <a target="_blank" href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM:
                            10.108.105.*]</font><font class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/toobee">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4775?id=toobee"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=toobee"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a3"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/konjunyiha">konjunyiha</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4776" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4776.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4776.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=konjunyiha">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=konjunyiha">只看此ID</a>
                        </li>
                    </ul>
                    <span class="a-pos">第3楼</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/uploadFace/K/konjunyiha.289.jpg" width="120px"
                                              height="118px"/></div>
                    <div class="a-u-uid">sunSpear</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>105</dd>
                        <dt>积分</dt>
                        <dd>4434</dd>
                        <dt>星座</dt>
                        <dd>白羊座</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: konjunyiha (铁甲依然在), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 11:04:57 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        你说的那种已经是比较简洁的实现了。。 <br/> 不然在函数体里面写个if判断，感觉冗余更大 <br/> -- <br/>&nbsp;&nbsp;<br/> <font
                                class="f000"></font><font class="f003">※ 来源:・北邮人论坛 <a target="_blank"
                                                                                      href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM:
                            10.108.148.*]</font><font class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/konjunyiha">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4776?id=konjunyiha"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=konjunyiha"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a4"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/trumpet">trumpet</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4777" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4777.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4777.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=trumpet">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=trumpet">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">第4楼</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/img/face_default_m.jpg"/></div>
                    <div class="a-u-uid"> trumpet</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>176</dd>
                        <dt>积分</dt>
                        <dd>1148</dd>
                        <dt>星座</dt>
                        <dd>未知</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: trumpet ( trumpet), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 11:43:31 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        好吧，貌似会有更简洁的方法，比如对各请求进行预处理之类的，我再找找吧，谢啦 <br/> 【 在 konjunyiha 的大作中提到: 】 <br/> <font class="f006">:
                            你说的那种已经是比较简洁的实现了。。 </font> <br/> <font class="f006">: 不然在函数体里面写个if判断，感觉冗余更大 </font> <br/>&nbsp;&nbsp;<br/>
                        -- <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font class="f001">※ 来源:・北邮人论坛 <a
                                target="_blank" href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM: 10.201.6.*]</font><font
                                class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/trumpet">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4777?id=trumpet"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=trumpet"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a5"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/gumgum">gumgum</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4778" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4778.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4778.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=gumgum">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=gumgum">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">第5楼</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/uploadFace/G/gumgum.982.jpg" width="100px"
                                              height="100px"/></div>
                    <div class="a-u-uid">.........</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>2428</dd>
                        <dt>积分</dt>
                        <dd>9909</dd>
                        <dt>星座</dt>
                        <dd>未知</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: gumgum (.........), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 13:23:10 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        用django的backends处理？ <br/> 【 在 trumpet 的大作中提到: 】 <br/> <font class="f006">:
                            好吧，貌似会有更简洁的方法，比如对各请求进行预处理之类的，我再找找吧，谢啦 </font> <br/>&nbsp;&nbsp;<br/> --
                        <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font class="f006">※ 来源:・北邮人论坛 <a
                                target="_blank" href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM: 14.17.22.*]</font><font
                                class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/gumgum">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4778?id=gumgum"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=gumgum"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a6"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/teoy">teoy</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4780" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4780.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4780.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=teoy">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=teoy">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">第6楼</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/uploadFace/T/teoy.5033.jpg" width="120px"
                                              height="90px"/></div>
                    <div class="a-u-uid">teoy</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>1218</dd>
                        <dt>积分</dt>
                        <dd>12914</dd>
                        <dt>星座</dt>
                        <dd>处女座</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: teoy (teoy), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 20:00:07 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        @login_required <br/> -- <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font class="f002">※
                            来源:・北邮人论坛 <a target="_blank" href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM:
                            114.242.250.*]</font><font class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/teoy">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4780?id=teoy" class="a-post">发信</a>
                        </li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=teoy"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a7"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/teoy">teoy</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4781" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4781.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4781.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=teoy">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=teoy">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">第7楼</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/uploadFace/T/teoy.5033.jpg" width="120px"
                                              height="90px"/></div>
                    <div class="a-u-uid">teoy</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>1218</dd>
                        <dt>积分</dt>
                        <dd>12914</dd>
                        <dt>星座</dt>
                        <dd>处女座</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: teoy (teoy), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Sun Jan&nbsp;&nbsp;4 20:00:51 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        刚才没注意，感觉加@login_required已经是最简单的方法了，至少我尝试了几种就这个好些。 <br/> 【 在 trumpet 的大作中提到: 】 <br/> <font
                                class="f006">:
                            我想到的一种方法是对views.py中的每个请求处理函数加上@login_required，但每个函数前都加着个装饰器感觉比较冗余，哪位大神有更好的方法啊？跪求 </font>
                        <br/>&nbsp;&nbsp;<br/> -- <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font class="f002">※
                            来源:・北邮人论坛 <a target="_blank" href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM:
                            114.242.250.*]</font><font class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/teoy">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4781?id=teoy" class="a-post">发信</a>
                        </li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=teoy"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a8"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/carry1514">carry1514</a></span><span
                        class="a-u-sex"><samp title="男生哦 在线" class="ico-pos-online-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4782" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4782.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4782.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=carry1514">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=carry1514">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">第8楼</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/uploadFace/C/carry1514.8728.jpg" width="120px"
                                              height="69px"/></div>
                    <div class="a-u-uid">【意涵团】小枪手14</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>97</dd>
                        <dt>积分</dt>
                        <dd>6765</dd>
                        <dt>星座</dt>
                        <dd>射手座</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: carry1514 (【意涵团】小枪手14), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Mon Jan&nbsp;&nbsp;5 00:16:54 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        decorator <br/> 【 在 trumpet 的大作中提到: 】 <br/> 我想到的一种方法是对views.py中的每个请求处理函... <br/> -- <br/>&nbsp;&nbsp;<br/>
                        <font class="f000"></font><font class="f001">※ 来源:・北邮人论坛 <a target="_blank"
                                                                                    href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM:
                            10.210.0.*]</font><font class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/carry1514">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4782?id=carry1514"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=carry1514"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
    <a name="a9"></a>

    <div class="a-wrap corner">
        <table class="article">
            <tr class="a-head">
                <td class="a-left"><span class="a-u-name"><a href="/user/query/trumpet">trumpet</a></span><span
                        class="a-u-sex"><samp title="男生哦 离线" class="ico-pos-offline-man"></samp></span></td>
                <td>
                    <ul class="a-func">
                        <li><samp class="ico-pos-reply"></samp><a href="/article/Python/post/4783" class="a-post">回复</a>
                        </li>
                        <li><samp class="ico-pos-mess"></samp><a href="/article/Python/ajax_cross/4783.json"
                                                                 class="a-func-cross">转载</a></li>
                        <li><samp class="ico-pos-forward"></samp><a href="/article/Python/ajax_forward/4783.json"
                                                                    class="a-func-forward">转寄</a></li>
                        <li><samp class="ico-pos-search"></samp><a href="/s/article?b=Python&au=trumpet">搜索</a></li>
                        <li><samp class="ico-pos-user"></samp><a href="/article/Python/4773?au=trumpet">只看此ID</a></li>
                    </ul>
                    <span class="a-pos">第9楼</span></td>
            </tr>
            <tr class="a-body">
                <td class="a-left">
                    <div class="a-u-img"><img src="http://static.byr.cn/img/face_default_m.jpg"/></div>
                    <div class="a-u-uid"> trumpet</div>
                    <dl class="a-u-info">
                        <dt>等级</dt>
                        <dd>用户</dd>
                        <dt>文章</dt>
                        <dd>176</dd>
                        <dt>积分</dt>
                        <dd>1148</dd>
                        <dt>星座</dt>
                        <dd>未知</dd>
                    </dl>
                </td>
                <td class="a-content">
                    <div class="a-content-wrap">发信人: trumpet ( trumpet), 信区: Python <br/> 标&nbsp;&nbsp;题: Re:
                        [问题]django中如何让所有页面都必须登陆后才能访问 <br/> 发信站: 北邮人论坛 (Mon Jan&nbsp;&nbsp;5 01:06:37 2015), 站内 <br/>&nbsp;&nbsp;<br/>
                        不懂。。。 <br/> 【 在 gumgum 的大作中提到: 】 <br/> <font class="f006">: 用django的backends处理？ </font> <br/>&nbsp;&nbsp;<br/>
                        -- <br/>&nbsp;&nbsp;<br/> <font class="f000"></font><font class="f006">※ 来源:・北邮人论坛 <a
                                target="_blank" href="http://bbs.byr.cn">http://bbs.byr.cn</a>・[FROM: 10.201.6.*]</font><font
                                class="f000"> <br/> </font></div>
                </td>
            </tr>
            <tr class="a-bottom">
                <td class="a-left">
                    <ul class="a-func a-func-info">
                        <li><samp class="ico-pos-query"></samp><a href="/user/query/trumpet">查看</a></li>
                        <li><samp class="ico-pos-mess"></samp><a href="/mail/Python/reply/4783?id=trumpet"
                                                                 class="a-post">发信</a></li>
                        <li><samp class="ico-pos-friend"></samp><a href="/friend/ajax_add.json?id=trumpet"
                                                                   class="a-func-friend a-post">加好友</a></li>
                    </ul>
                </td>
                <td>
                    <ul class="a-status"></ul>
                    <a href="#" class="c63f a-back">返回顶部</a></td>
            </tr>
        </table>
    </div>
</div>
<div class="t-pre-bottom">
    <div class="page">
        <ul class="pagination">
            <li class="page-pre">文章数:<i>11</i>&emsp;分页:</li>
            <li>
                <ol title="分页列表" class="page-main">
                    <li class="page-select"><a title="当前页">1</a></li>
                    <li class="page-normal"><a href="/article/Python/4773?p=2" title="转到第2页">2</a></li>
                    <li class="page-normal"><a href="/article/Python/4773?p=2" title="下一页">>></a></li>
                </ol>
            </li>
            <li class="page-jump"><input type="text" class="input-text"/><input type="button" class="button" title="跳转"
                                                                                value="跳"/></li>
        </ul>
    </div>
    <div class="t-btn">
        <form id="f_search" method="get" action="/s/article"><input type="text" class="input-text input" name="t1"
                                                                    placeholder="输入关键字" size="16"/><input type="text"
                                                                                                          class="input-text input"
                                                                                                          name="au"
                                                                                                          placeholder="输入作者ID"
                                                                                                          size="12"/><input
                type="checkbox" name="m" id="c_m"/><label for="c_m">精华帖</label><input type="checkbox" name="a"
                                                                                      id="c_a"/><label
                for="c_a">带附件</label><input type="submit" class="button" value="搜索"/><input type="hidden" name="b"
                                                                                            value="Python"/></form>
    </div>
</div>
<div class="corner a-comment">
    <form id="quick_post" method="post" action="/article/Python/ajax_post.json">
        <div class="a-comment-btn"><input type="submit" class="button" value="快捷回复"/></div>
        <div class="a-comment-txt"><textarea name="content" placeholder="写下你的评论..."></textarea></div>
        <div id="em_img"></div>
        <input type="hidden" name="id" value="4773"/><input type="hidden" name="subject"
                                                            value="Re%3A%20%5B%E9%97%AE%E9%A2%98%5Ddjango%E4%B8%AD%E5%A6%82%E4%BD%95%E8%AE%A9%E6%89%80%E6%9C%89%E9%A1%B5%E9%9D%A2%E9%83%BD%E5%BF%85%E9%A1%BB%E7%99%BB%E9%99%86%E5%90%8E%E6%89%8D%E8%83%BD%E8%AE%BF%E9%97%AE"/>
    </form>
</div>
<script id="tmpl_forward" type="text/template">
    <form
     id="a_forward" action="<%=action%>" method="post"><ul><li><span>收件人:</span><input type="text" class="input-text" name="target"/><select id="a_forward_list"></select></li><li><span>合集转寄:</span><input type="checkbox" name="threads" />&emsp;&emsp;<span>合集无引文:</span><input type="checkbox" name="noref" /></li><li><span>不含附件:</span><input type="checkbox" name="noatt" /></li></ul></form>
</script>
<script id="tmpl_cross" type="text/template">
    <form
     id="a_cross" action="<%=action%>" method="post"><ul><li><span>选择分区:</span><select id="a_cross_section"></select></li><li><span>选择版面:</span><select name="target" id="a_cross_board"></select></li><li><span>转信:</span><input type="checkbox" name="outgo" /></li><li class="warning">请注意: <span>本站站规规定, 同样内容的文章严禁在五个(含)以上讨论区内重复发表</span>，对<span>违反上述规定者</span>, 管理人员将依据<span>本站帐号管理办法中相关条款</span>进行处理!请大家共同维护良好的讨论秩序，节约系统资源, 谢谢合作！</li></ul></form>
</script>
<script type="text/javascript">window.user_post = false;
;
$('#notice_nav').html('<a href="/default">北邮人论坛</a>&ensp;>>&ensp;<a href="/section/2">学术科技</a>&ensp;>>&ensp;<a href="/board/Python">Python</a>&ensp;>>&ensp;<a href="javascript:void(0)">阅读文章</a>');
$.setTitle('[问题]django中如何让所有页面都必须登陆后才能访问');
;</script>
<script type="text/javascript">;
var BShare = {sites: [
    {"title": "分享到新浪微博", "url": "http://service.weibo.com/share/share.php?appkey=396731376&url=%url%&title=%content%&pic=&ralateUid=2005901751", "img": 'http://www.sinaimg.cn/blog/developer/wiki/16x16.png'},
    {"title": "分享到腾讯微博", "url": "http://v.t.qq.com/share/share.php?url=%url%&title=%content%", "img": 'http://v.t.qq.com/share/images/s/weiboicon16.png'},
    {"title": "分享到搜狐微博", "url": "http://t.sohu.com/third/post.jsp?url=%url%&title=%content%&content=utf-8", "img": 'http://s2.cr.itc.cn/img/t/152.png'},
    {"title": "分享到人人网", "url": "http://www.connect.renren.com/share/sharer?url=%url%&title=%content%", "img": 'http://wiki.dev.renren.com/mediawiki/images/b/bd/Logo16.png'},
    {"title": "分享到开心网", "url": "http://www.kaixin001.com/repaste/bshare.php?rurl=%url%&rtitle=%content%", "img": 'http://img1.kaixin001.com.cn/i3/platform/ico_kx16.gif'},
    {"title": "分享到豆瓣", "url": "http://www.douban.com/recommend/?url=%url%&title=%content%", "img": 'http://img2.douban.com/pics/fw2douban_s.png'}
], template: '<img style="margin-left:5px;cursor:pointer;vertical-align:bottom;width:16px;height:16px;" title="%title%" src="%img%" />', init: function (area, url, content) {
    $(this.sites).each(function (i, e) {
        var template = BShare.template;
        e.url = e.url.replace(/%url%/g, encodeURIComponent(url));
        e.url = e.url.replace(/%content%/g, encodeURIComponent(content));
        template = template.replace(/%img%/g, e.img);
        template = template.replace(/%title%/g, e.title);
        $(template).bind('click', e.url, BShare.handler).appendTo(area)
    })
}, handler: function (e) {
    var f = function () {
        if (!window.open(e.data, '_blank', 'toolbar=0,resizable=1,scrollbars=yes,status=1,width=640,height=480'))location.href = e.data
    };
    if (/Firefox/.test(navigator.userAgent))setTimeout(f, 0); else f()
}};
$(function () {
    $('#quick_post textarea').ubb({enable: false, ubb_img_path: SYS.base + "/img/ubb/", ubb_em: $('#em_img')});
    var validPost = function () {
        if (!user_post) {
            if (SESSION.get('is_login'))DIALOG.alertDialog(SYS.code.MSG_NOPERM); else $('#u_login_id').alertDialog(SYS.code.MSG_LOGIN);
            return false
        }
        return true
    };
    var keyboard = [];
    var end = function () {
        keyboard = []
    };
    $('#body').on('keydown', function (e) {
        var self = this;
        keyboard.push((e || event).keyCode);
        if ((keyboard + '').indexOf('38,38,40,40,37,39,37,39,49,48,49,48') + 1) {
            alert('哎呀被发现了！彩蛋3号成就获得！ --来自bbs.byr.cn');
            setTimeout(end, 1000)
        }
    });
    $('#quick_post').submit(function () {
        if ($.trim($('#quick_post textarea').val()) == '') {
            $('#quick_post textarea').alertDialog(SYS.code.MSG_NULL);
            return false
        }
        if (validPost()) {
            $.post($('#quick_post').attr('action'), $('#quick_post').getPostData(), function (json) {
                DIALOG.ajaxDialog(json)
            }, 'json')
        }
        return false
    });
    $('#quick_post textarea').placeholder();
    $('#f_search').submit(function () {
        BODY.open($(this).attr('action') + '?' + _.map($(this).getPostData(),function (v, k) {
            v = encodeURIComponent(encodeURIComponent(v));
            return k + '=' + v
        }).join('&'));
        return false
    });
    $('#f_search input[placeholder]').placeholder();
    $('#body').on('click', '.a-post', validPost).on('click', '#a_reply',function () {
        $('#quick_post textarea').focus()
    }).on('click', '.a-func-friend',function () {
        $.post($(this).attr('href'), function (json) {
            delete json['default'];
            delete json['list'];
            DIALOG.ajaxDialog(json)
        }, 'json');
        return false
    }).on('keydown', '#quick_post textarea',function (event) {
        if (event.ctrlKey && event.keyCode == 13) {
            $('#quick_post').submit();
            return false
        }
    }).on('click', '.a-func-toggle',function () {
        $(this).html($('.a-nice-comment').is(":hidden") ? "收起 ▲" : "展开 ");
        $('.a-nice-comment').slideToggle()
    }).on('click', '.a-func-focus',function () {
        var self = this;
        DIALOG.confirmDialog('确认推荐此文章?', function () {
            $.post($(self).attr('href'), function (json) {
                DIALOG.ajaxDialog(json)
            }, 'json')
        });
        return false
    }).on('click', '.a-func-promote',function () {
        var self = this;
        DIALOG.confirmDialog('确认给此评论好评? (评论被置顶于精彩回复,版主请谨慎选择.)', function () {
            $.post($(self).attr('href'), function (json) {
                DIALOG.ajaxDialog(json)
            }, 'json')
        });
        return false
    }).on('click', '.a-func-harm',function () {
        var self = this;
        DIALOG.confirmDialog('确认禁止? (将不会再也不会浮上来了,请谨慎选择.)', function () {
            $.post($(self).attr('href'), function (json) {
                DIALOG.ajaxDialog(json)
            }, 'json')
        });
        return false
    }).on('click', '.a-func-support',function () {
        var self = this;
        DIALOG.confirmDialog('确认给楼主赞一个? (将扣取2积分送给楼主)', function () {
            $.post($(self).attr('href'), function (json) {
                if (typeof(json['data']) != 'undefined') {
                    $('a#' + $(self).attr('id')).each(function () {
                        $(this).html('<samp class="ico-pos-zanactive" style="margin-top:-4px;margin-right:4px;"></samp>' + "楼主好评 (+" + json['data']['lsum'] + ")")
                    })
                }
                DIALOG.ajaxDialog(json)
            }, 'json')
        });
        return false
    }).on('click', '.a-func-like',function () {
        var self = this;
        DIALOG.confirmDialog('确认给本楼层点个赞? (将扣取3积分送给层主)', function () {
            $.post($(self).attr('href'), function (json) {
                if (typeof(json['data']) != 'undefined') {
                    $('a#' + $(self).attr('id')).each(function () {
                        console.log(this);
                        $(this).html('<samp class="ico-pos-zanactive" style="margin-top:-4px;margin-right:4px;"></samp>' + "赞(" + json['data']['lsum'] + ")");
                        $(this).find('samp').removeClass().addClass("ico-pos-zanactive").css({'-webkit-transform': 'scale(1.0)'});
                        setTimeout(function () {
                            $(this).find('samp').css({'-webkit-transform': 'scale(1.0)'})
                        }, 150)
                    })
                } else {
                    DIALOG.ajaxDialog(json)
                }
            }, 'json')
        });
        return false
    }).on('click', '.a-func-commend',function () {
        var self = this;
        DIALOG.confirmDialog('确认推荐到热点活动?', function () {
            $.post($(self).attr('href'), function (json) {
                DIALOG.ajaxDialog(json)
            }, 'json')
        });
        return false
    }).on('click', '.a-func-del',function () {
        var self = this;
        DIALOG.confirmDialog('确认删除此文章?', function () {
            $.post($(self).attr('href'), function (json) {
                DIALOG.ajaxDialog(json)
            }, 'json')
        });
        return false
    }).on('click', '.a-back', function () {
        $('html,body').animate({scrollTop: 0}, 500)
    });
    BShare.init($('#a_share').parent(), $('#a_share').attr('_u'), $('#a_share').attr('_c'));
    if ($('.map-map').length > 0)nForumMap.loadJs('nForumMap.parseMap', null);
    $('#body').on('click', '.a-func-forward', function () {
        if (!SESSION.get('is_login')) {
            $('#u_login_id').alertDialog(SYS.code.MSG_LOGIN);
            return false
        }
        var d = DIALOG.formDialog(_.template($('#tmpl_forward').html())({action: $(this).attr('href'), friends: []}), {buttons: [
            {text: SYS.code.COM_SUBMIT, click: function () {
                var f = $(this).find('#a_forward');
                $.post(f.attr('action'), f.getPostData(), function (repo) {
                    DIALOG.ajaxDialog(repo)
                });
                $(this).dialog('close')
            }},
            {text: SYS.code.COM_CANCAL, click: function () {
                $(this).dialog('close')
            }}
        ]}).on('change.nforum', 'select', function () {
            $(this).prev().val($(this).val())
        });
        APP.cacheFriends(function (list) {
            d.find('#a_forward_list').empty().append(_.reduce(list, function (ret, item) {
                ret += ('<option value="' + item + '">' + item + '</option>');
                return ret
            }, '<option value="">选择好友</option>'))
        });
        return false
    });
    $('#body').on('click', '.a-func-cross', function () {
        if (!SESSION.get('is_login')) {
            $('#u_login_id').alertDialog(SYS.code.MSG_LOGIN);
            return false
        }
        var d = DIALOG.formDialog(_.template($('#tmpl_cross').html())({action: $(this).attr('href')}), {buttons: [
            {text: SYS.code.COM_SUBMIT, click: function () {
                var f = $(this).find('#a_cross');
                $.post(f.attr('action'), f.getPostData(), function (repo) {
                    DIALOG.ajaxDialog(repo)
                });
                $(this).dialog('close')
            }},
            {text: SYS.code.COM_CANCAL, click: function () {
                $(this).dialog('close')
            }}
        ], width: 400}).on('change.nforum', '#a_cross_section', function () {
            APP.cacheSection($(this).val(), function (list) {
                $('#a_cross_board').empty().append(_.reduce(list, function (ret, item) {
                    ret += '<option value="' + item.name + '">' + item.desc + '(' + item.name + ')</option>';
                    return ret
                }, '<option value="">请选择版面</option>'))
            }, this)
        });
        APP.cacheSection('root', function (list) {
            $('#a_cross_section').empty().append(_.reduce(list, function (ret, item) {
                ret += '<option value="' + item.name + '">' + item.name + '区:' + item.desc + '</option>';
                return ret
            }, '')).change()
        }, this);
        return false
    });
    if (typeof sh_init !== 'undefined')sh_init();
    spb = $('.specialtips');
    if (typeof spb !== 'undefined') {
        spb.show();
        var w = 0 - ($('#spb-wrap').width() + 5);
        w = w + 'px';
        $('#spb-wrap').css({'right': w});
        var clearing = false;
        var showOrHide = false;
        $(window).scroll(function () {
            if (!clearing) {
                if ($(window).scrollTop() > $(document).height() - $(window).height() - 50) {
                    $('#spb-wrap').stop().animate({'right': '20px'}, '300', 'swing', function () {
                        showOrHide = true
                    })
                } else {
                    if (showOrHide) {
                        clearing = true;
                        $('#spb-wrap').stop().animate({'right': w}, '300', 'swing', function () {
                            clearing = false;
                            showOrHide = false
                        })
                    }
                }
            }
        });
        $(window).trigger('scroll')
    }
});</script>